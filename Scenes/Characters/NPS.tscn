[gd_scene load_steps=44 format=3 uid="uid://chku42sa88b0g"]

[ext_resource type="Script" path="res://Scripts/Character_scripts/NPSs.gd" id="1_81pvv"]
[ext_resource type="Shader" path="res://Art/Shaders/OutlineTest.gdshader" id="1_hatnr"]
[ext_resource type="Texture2D" uid="uid://bgn8fb6jsnab6" path="res://Art/Character/Mage.png" id="2_k8ds2"]
[ext_resource type="Shader" uid="uid://bna8w8wik6u0h" path="res://Art/Shaders/PlayerVisualShader.tres" id="3_4e4ep"]
[ext_resource type="FontFile" uid="uid://c0s1j1n8esy7x" path="res://Fonts/Minecraftia-Regular.ttf" id="3_35dde"]
[ext_resource type="Texture2D" uid="uid://85m7q3fj3yqw" path="res://Art/Character/MageCloak.png" id="3_lgs3t"]
[ext_resource type="Script" path="res://Scripts/Character_scripts/HitBox.gd" id="3_m2t84"]
[ext_resource type="Texture2D" uid="uid://dm1531nlm22l5" path="res://Art/Masks/Ball.png" id="4_8am1b"]
[ext_resource type="Texture2D" uid="uid://brk6fgd2qanql" path="res://Art/Character/MageFace.png" id="4_8lg8s"]
[ext_resource type="Texture2D" uid="uid://garspyffcbgq" path="res://Art/UI/LightProbe.png" id="6_3ita2"]
[ext_resource type="Script" path="res://Scripts/UI_scripts/Enemy_HUD.gd" id="11_xr2j0"]
[ext_resource type="Texture2D" uid="uid://cakrcglfti7vm" path="res://Art/UI/Status_inner2.png" id="12_e8mg1"]
[ext_resource type="Texture2D" uid="uid://ddasyjnhoy1m6" path="res://Art/UI/Status_border2.png" id="13_ryyc3"]
[ext_resource type="Texture2D" uid="uid://bcqrape83qe7c" path="res://Art/UI/Stamina_backplate.png" id="15_8231q"]
[ext_resource type="Texture2D" uid="uid://bijpbur8p3jeb" path="res://Art/Icons/Skills/single_7.png" id="17_qseee"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3juty"]
shader = ExtResource("1_hatnr")
shader_parameter/outline_color = Color(0, 0, 0, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1mfgp"]
size = Vector2(32, 56)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_edpkx"]
shader = ExtResource("3_4e4ep")
shader_parameter/PlayerCloak = Color(0.2, 0.788235, 1, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rbf11"]
size = Vector2(30, 28)

[sub_resource type="LabelSettings" id="LabelSettings_h4cy4"]
font = ExtResource("3_35dde")
font_size = 8

[sub_resource type="CircleShape2D" id="CircleShape2D_qwcsy"]
radius = 120.0

[sub_resource type="CircleShape2D" id="CircleShape2D_n5svg"]
radius = 200.0

[sub_resource type="Animation" id="Animation_uhobr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:flip_h")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Face:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Cloak:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [16]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("CollisionShape2D:disabled")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("PointLight2D:energy")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("HitBox/CollisionShape2D:disabled")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_v7wnx"]
resource_name = "death"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cloak:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.33, 0.66, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [48, 49, 50, 51]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Face:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4, 0.66, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [48, 49, 50, 51]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CollisionShape2D:disabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("HitBox/CollisionShape2D:disabled")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_ttycq"]
resource_name = "glow"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PointLight2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 0.9),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 0.25, 0.0]
}

[sub_resource type="Animation" id="Animation_cdr3l"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cloak:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 8]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Face:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 8]
}

[sub_resource type="Animation" id="Animation_u4sir"]
resource_name = "walk"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cloak:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.33, 0.66),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [16, 17, 18]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Face:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.33, 0.66),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [1, 17, 18]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ygp6v"]
_data = {
"RESET": SubResource("Animation_uhobr"),
"death": SubResource("Animation_v7wnx"),
"glow": SubResource("Animation_ttycq"),
"idle": SubResource("Animation_cdr3l"),
"walk": SubResource("Animation_u4sir")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_i0gjw"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1xco8"]
animation = &"death"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jtg81"]
animation = &"glow"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5c0ga"]
animation = &"idle"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_kseu3"]
input_0/name = "true"
input_0/auto_advance = false
input_0/reset = true
input_1/name = "false"
input_1/auto_advance = false
input_1/reset = true

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_bhfef"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_mirae"]
allow_transition_to_self = true
input_0/name = "idle"
input_0/auto_advance = true
input_0/reset = true
input_1/name = "walking"
input_1/auto_advance = true
input_1/reset = true

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_e3t6g"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_hjofk"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_5c0ga")
nodes/Animation/position = Vector2(-20, 140)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_i0gjw")
"nodes/Animation 2/position" = Vector2(-180, 280)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_1xco8")
"nodes/Animation 3/position" = Vector2(180, 20)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_jtg81")
"nodes/Animation 4/position" = Vector2(400, 380)
nodes/death/node = SubResource("AnimationNodeTransition_kseu3")
nodes/death/position = Vector2(420, 140)
nodes/glow/node = SubResource("AnimationNodeAdd2_bhfef")
nodes/glow/position = Vector2(640, 300)
nodes/output/position = Vector2(940, 240)
nodes/walking/node = SubResource("AnimationNodeTransition_mirae")
nodes/walking/position = Vector2(200, 200)
nodes/walking_speed/node = SubResource("AnimationNodeTimeScale_e3t6g")
nodes/walking_speed/position = Vector2(0, 260)
node_connections = [&"output", 0, &"glow", &"death", 0, &"Animation 3", &"death", 1, &"walking", &"glow", 0, &"death", &"glow", 1, &"Animation 4", &"walking", 0, &"Animation", &"walking", 1, &"walking_speed", &"walking_speed", 0, &"Animation 2"]

[sub_resource type="Gradient" id="Gradient_v2gcc"]
offsets = PackedFloat32Array(0.296774)
colors = PackedColorArray(0, 0, 0, 0.490196)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_iwg7x"]
gradient = SubResource("Gradient_v2gcc")
width = 3

[sub_resource type="Gradient" id="Gradient_3r88d"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(1, 0, 0, 0.392157, 1, 0.64, 0.64, 1, 1, 0, 0, 0.392157)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_q7e1l"]
gradient = SubResource("Gradient_3r88d")
width = 10
height = 30
fill_from = Vector2(0.5, 0)
fill_to = Vector2(0.5, 1)

[sub_resource type="Gradient" id="Gradient_5y7y8"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(0.16, 0.2, 0.4, 1, 0.88, 0.9, 1, 1, 0.16, 0.2, 0.4, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_orsl1"]
gradient = SubResource("Gradient_5y7y8")
width = 10
height = 30
fill_from = Vector2(0.5, 0)
fill_to = Vector2(0.5, 1)

[node name="NPS" type="CharacterBody2D"]
material = SubResource("ShaderMaterial_3juty")
collision_layer = 65
script = ExtResource("1_81pvv")

[node name="HitBox" type="CharacterBody2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 0
script = ExtResource("3_m2t84")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitBox"]
position = Vector2(-2, 4)
shape = SubResource("RectangleShape2D_1mfgp")

[node name="Sprite" type="Sprite2D" parent="."]
visible = false
texture = ExtResource("2_k8ds2")
hframes = 8
vframes = 9

[node name="PointLight2D" type="PointLight2D" parent="."]
light_mask = 2
visibility_layer = 2
energy = 0.0
range_item_cull_mask = 2
texture = ExtResource("6_3ita2")
texture_scale = 0.5

[node name="Cloak" type="Sprite2D" parent="."]
light_mask = 3
material = SubResource("ShaderMaterial_edpkx")
texture = ExtResource("3_lgs3t")
hframes = 8
vframes = 9
frame = 16

[node name="Face" type="Sprite2D" parent="."]
texture = ExtResource("4_8lg8s")
hframes = 8
vframes = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-2, -9)
shape = SubResource("RectangleShape2D_rbf11")

[node name="HeadLabel" type="Label" parent="."]
visible = false
offset_left = -4.0
offset_top = -34.0
offset_right = 36.0
offset_bottom = -11.0
text = "20"
label_settings = SubResource("LabelSettings_h4cy4")

[node name="VisionIdle" type="Area2D" parent="."]
visible = false
disable_mode = 2
collision_layer = 80
collision_mask = 80

[node name="CollisionShape2D" type="CollisionShape2D" parent="VisionIdle"]
position = Vector2(-80, 0)
shape = SubResource("CircleShape2D_qwcsy")

[node name="Sprite2D" type="Sprite2D" parent="VisionIdle"]
visible = false
position = Vector2(-80, 17)
texture = ExtResource("4_8am1b")

[node name="VisionBattle" type="Area2D" parent="."]
visible = false
disable_mode = 2
collision_layer = 80
collision_mask = 80

[node name="CollisionShape2D" type="CollisionShape2D" parent="VisionBattle"]
shape = SubResource("CircleShape2D_n5svg")

[node name="Sprite2D" type="Sprite2D" parent="VisionBattle"]
visible = false
position = Vector2(-80, 17)
texture = ExtResource("4_8am1b")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
method_call_mode = 1
libraries = {
"": SubResource("AnimationLibrary_ygp6v")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_hjofk")
anim_player = NodePath("../AnimationPlayer")
advance_expression_base_node = NodePath("..")
active = true
process_callback = 0
parameters/death/current_state = "false"
parameters/death/transition_request = ""
parameters/death/current_index = 1
parameters/glow/add_amount = 0.0
parameters/walking/current_state = "idle"
parameters/walking/transition_request = ""
parameters/walking/current_index = 0
parameters/walking_speed/scale = 1.0

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = -53.0
offset_top = -54.0
offset_right = -53.0
offset_bottom = -54.0
mouse_filter = 1
script = ExtResource("11_xr2j0")

[node name="Status" type="Control" parent="HUD"]
anchors_preset = 0
offset_right = 153.0
offset_bottom = 23.0

[node name="Inner" type="TextureRect" parent="HUD/Status"]
self_modulate = Color(0.0588235, 0.0705882, 0.141176, 0.490196)
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
texture = ExtResource("12_e8mg1")

[node name="Border" type="TextureRect" parent="HUD/Status"]
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
texture = ExtResource("13_ryyc3")

[node name="HealthBar" type="TextureRect" parent="HUD/Status"]
custom_minimum_size = Vector2(0, 3)
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 2.0
offset_top = 4.5
offset_right = -56.0
offset_bottom = 7.5
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture1D_iwg7x")

[node name="TextureProgressBar" type="TextureProgressBar" parent="HUD/Status/HealthBar"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 1.0
offset_right = -1.0
grow_horizontal = 2
grow_vertical = 2
value = 40.0
nine_patch_stretch = true
texture_progress = SubResource("GradientTexture2D_q7e1l")

[node name="StaminaBar" type="TextureRect" parent="HUD/Status"]
custom_minimum_size = Vector2(0, 3)
layout_mode = 1
anchors_preset = 14
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 2.0
offset_top = -6.5
offset_right = -56.0
offset_bottom = -3.5
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture1D_iwg7x")

[node name="TextureProgressBar" type="TextureProgressBar" parent="HUD/Status/StaminaBar"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 1.0
offset_right = -1.0
grow_horizontal = 2
grow_vertical = 2
value = 40.0
nine_patch_stretch = true
texture_progress = SubResource("GradientTexture2D_orsl1")

[node name="StaminaBackplate" type="TextureProgressBar" parent="HUD/Status"]
layout_mode = 0
offset_top = -9.0
offset_right = 153.0
offset_bottom = 10.0
max_value = 151.0
value = 95.0
texture_progress = ExtResource("15_8231q")

[node name="StatusesContainer" type="HBoxContainer" parent="HUD"]
layout_mode = 0
offset_top = -23.0
offset_right = 152.0
offset_bottom = -1.0

[node name="Status1" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status1"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")

[node name="Status2" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status2"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")

[node name="Status3" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status3"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")

[node name="Status4" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status4"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")

[node name="Status5" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status5"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")

[node name="Status6" type="Control" parent="HUD/StatusesContainer"]
visible = false
custom_minimum_size = Vector2(22, 22)
layout_mode = 2

[node name="Icon" type="TextureRect" parent="HUD/StatusesContainer/Status6"]
layout_mode = 2
offset_right = 22.0
offset_bottom = 22.0
texture = ExtResource("17_qseee")
